<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Browser History Manager Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <h1>Browser History Manager Settings</h1>
    
    <div class="tabs">
      <button class="tab-button active" data-tab="general">General</button>
      <button class="tab-button" data-tab="sync">Sync</button>
      <button class="tab-button" data-tab="system">System</button>
    </div>
    
    <!-- 通用设置选项卡 -->
    <div class="tab-content active" id="general-tab">
      <section class="server-settings">
        <h2>Server Settings</h2>
        <div class="setting-item">
          <label for="backendUrl">Backend URL:</label>
          <input type="text" id="backendUrl" class="full-width">
          <button id="saveBackendUrl" class="action-button">Save</button>
          <span id="urlStatus" class="status-text"></span>
        </div>
        
        <div class="setting-item">
          <label>
            <input type="checkbox" id="highlightToggle">
            Highlight visited links
          </label>
          <p class="setting-desc">When enabled, links that you've visited before will be highlighted with a blue border.</p>
          <button id="saveHighlight" class="action-button">Save</button>
          <span id="highlightStatus" class="status-text"></span>
        </div>

        <div class="setting-item">
          <h3>URL Normalization</h3>
          <p class="setting-desc">
            <strong>URL normalization rules have been moved to the backend system.</strong><br>
            Please use the frontend management interface at <a href="http://localhost:18180" target="_blank">http://localhost:18180</a> to manage URL normalization rules.
            This provides better rule management, testing capabilities, and centralized configuration.
          </p>
        </div>
      </section>
    </div>
    
    <!-- 同步选项卡 -->
    <div class="tab-content" id="sync-tab">
      <section class="pending-records">
        <h2>Pending Records</h2>
        <div class="records-info">
          <span id="pendingCount">Loading...</span>
          <button id="retryAll" class="action-button">Sync All Pending Records</button>
        </div>
        <div id="recordsList" class="records-list">
          <!-- Records will be inserted here -->
        </div>
      </section>

      <section class="manual-sync">
        <h2>Manual Sync</h2>
        <div class="sync-controls">
          <div class="date-range">
            <label>
              From:
              <input type="datetime-local" id="syncStartTime">
            </label>
            <label>
              To:
              <input type="datetime-local" id="syncEndTime">
            </label>
          </div>
          <button id="startSync" class="action-button">Start Sync</button>
        </div>
        <div id="syncProgress" class="sync-progress">
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
          <div class="progress-text"></div>
        </div>
      </section>
    </div>
    
    <!-- 系统设置选项卡 -->
    <div class="tab-content" id="system-tab">
      <section class="system-settings">
        <h2>System Settings</h2>
        
        <div class="setting-item">
          <label for="logLevel">Log Level:</label>
          <select id="logLevel">
            <option value="DEBUG">DEBUG - All logs</option>
            <option value="INFO">INFO - Standard information</option>
            <option value="WARN">WARN - Warnings and errors</option>
            <option value="ERROR">ERROR - Only errors</option>
            <option value="NONE">NONE - No logging</option>
          </select>
          <button id="saveLogLevel" class="action-button">Save</button>
          <span id="logLevelStatus" class="status-text"></span>
          <p class="setting-desc">Set logging verbosity level for extension components.</p>
        </div>
        
        <div class="setting-item">
          <h3>Current Settings</h3>
          <div id="currentSettings" class="settings-display">
            <!-- Current settings will be displayed here -->
          </div>
        </div>
      </section>
    </div>
  </div>
  <script src="options.js" type="module"></script>
</body>
</html> 