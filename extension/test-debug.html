<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test Page - History Highlighter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.8;
        }
        .debug-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .debug-section h3 {
            margin-top: 0;
            color: #333;
        }
        a {
            display: block;
            margin: 15px 0;
            padding: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: #0066cc;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        a:hover {
            background: #f0f0f0;
            text-decoration: underline;
        }
        .highlighted-link {
            border-color: #9c27b0 !important;
            background-color: rgba(156, 39, 176, 0.1) !important;
        }
        .debug-info {
            background: #fff3cd;
            border: 1px solid #ffd700;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .status {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
            margin: 5px 0;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ”§ History Highlighter Debug Test</h1>
    
    <div class="debug-info">
        <h3>è°ƒè¯•ä¿¡æ¯</h3>
        <div id="debug-status">æ£€æŸ¥ä¸­...</div>
        <div id="extension-status">æ‰©å±•çŠ¶æ€: æ£€æŸ¥ä¸­...</div>
        <div id="config-status">é…ç½®çŠ¶æ€: æ£€æŸ¥ä¸­...</div>
        <div id="links-status">é“¾æ¥æ‰«æ: å¾…å¼€å§‹...</div>
    </div>

    <div class="debug-section">
        <h3>ğŸŒ å¸¸è§ç½‘ç«™é“¾æ¥ (è¿™äº›é€šå¸¸å·²è¢«è®¿é—®)</h3>
        <a href="https://www.google.com">Google Search - æœç´¢å¼•æ“</a>
        <a href="https://www.github.com">GitHub - ä»£ç æ‰˜ç®¡</a>
        <a href="https://www.stackoverflow.com">Stack Overflow - æŠ€æœ¯é—®ç­”</a>
        <a href="https://www.youtube.com">YouTube - è§†é¢‘å¹³å°</a>
        <a href="https://www.wikipedia.org">Wikipedia - ç™¾ç§‘å…¨ä¹¦</a>
        <a href="https://www.reddit.com">Reddit - ç¤¾äº¤å¹³å°</a>
    </div>

    <div class="debug-section">
        <h3>ğŸ”— å¼€å‘è€…ç½‘ç«™ (å¼€å‘è€…å¸¸è®¿é—®)</h3>
        <a href="https://developer.mozilla.org">MDN Web Docs</a>
        <a href="https://www.npmjs.com">NPM Registry</a>
        <a href="https://nodejs.org">Node.js Official</a>
        <a href="https://chrome.google.com/webstore">Chrome Web Store</a>
    </div>

    <div class="debug-section">
        <h3>âŒ æ— æ•ˆé“¾æ¥ (ä¸åº”è¯¥è¢«é«˜äº®)</h3>
        <a href="javascript:alert('JavaScript')">JavaScript åè®®</a>
        <a href="mailto:test@example.com">é‚®ä»¶é“¾æ¥</a>
        <a href="tel:+1234567890">ç”µè¯é“¾æ¥</a>
        <a href="#top">é¡µé¢é”šç‚¹</a>
        <a href="data:text/plain,Hello">Data URL</a>
    </div>

    <script>
        console.log('ğŸ”§ Debug test page loaded');

        // æ£€æŸ¥æ‰©å±•çŠ¶æ€
        function checkExtensionStatus() {
            const debugStatus = document.getElementById('debug-status');
            const extensionStatus = document.getElementById('extension-status');
            const configStatus = document.getElementById('config-status');
            const linksStatus = document.getElementById('links-status');

            // æ£€æŸ¥æ˜¯å¦æœ‰æ ·å¼è¢«æ³¨å…¥
            setTimeout(() => {
                const styleElement = document.getElementById('link-highlighter-styles');
                if (styleElement) {
                    extensionStatus.innerHTML = '<span class="status success">æ‰©å±•çŠ¶æ€: âœ… å·²åŠ è½½</span>';
                    console.log('âœ… Extension styles found');
                } else {
                    extensionStatus.innerHTML = '<span class="status error">æ‰©å±•çŠ¶æ€: âŒ æœªåŠ è½½</span>';
                    console.log('âŒ Extension styles not found');
                }

                // æ£€æŸ¥é«˜äº®çš„é“¾æ¥
                const highlightedLinks = document.querySelectorAll('.history-link-highlighted');
                linksStatus.innerHTML = `<span class="status info">é“¾æ¥æ‰«æ: æ‰¾åˆ° ${highlightedLinks.length} ä¸ªé«˜äº®é“¾æ¥</span>`;
                console.log(`ğŸ”— Found ${highlightedLinks.length} highlighted links`);

                // æ£€æŸ¥é…ç½®
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    configStatus.innerHTML = '<span class="status success">é…ç½®çŠ¶æ€: âœ… Chrome API å¯ç”¨</span>';
                } else {
                    configStatus.innerHTML = '<span class="status error">é…ç½®çŠ¶æ€: âŒ Chrome API ä¸å¯ç”¨</span>';
                }

                debugStatus.innerHTML = '<span class="status info">è°ƒè¯•æ£€æŸ¥å®Œæˆ</span>';
            }, 3000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', checkExtensionStatus);
        } else {
            checkExtensionStatus();
        }

        // ç‚¹å‡»é“¾æ¥æ—¶è®°å½•
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                console.log('ğŸ”— Clicked link:', e.target.href);
                
                // å¦‚æœæ˜¯å¤–éƒ¨é“¾æ¥ï¼Œæç¤ºç”¨æˆ·
                if (e.target.href.startsWith('http')) {
                    e.preventDefault();
                    if (confirm(`è®¿é—®é“¾æ¥: ${e.target.href}\n\nç‚¹å‡»ç¡®å®šè®¿é—®ï¼Œå–æ¶ˆè¿”å›ã€‚`)) {
                        window.open(e.target.href, '_blank');
                    }
                }
            }
        });

        // å®šæœŸæ£€æŸ¥é«˜äº®çŠ¶æ€
        setInterval(() => {
            const highlightedLinks = document.querySelectorAll('.history-link-highlighted');
            if (highlightedLinks.length > 0) {
                console.log(`ğŸ¯ Currently ${highlightedLinks.length} links are highlighted`);
            }
        }, 5000);
    </script>
</body>
</html> 